<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>文章管理系统</title>
</head>
<body>
  <h1>欢迎来到文章管理系统</h1>

  <h3>以下是公开的文章：</h3>
  <div id="articleList"></div>

  <!-- 登录表单 -->
  <div id="loginForm" style="display: none;">
    <h2>请输入管理员密码</h2>
    <form id="login">
      <input type="password" id="password" placeholder="请输入密码" required>
      <button type="submit">提交</button>
    </form>
  </div>

  <!-- 管理面板 -->
  <div id="adminPanel" style="display: none;">
    <h2>新增文章</h2>
    <form id="createArticleForm">
      <label for="title">标题:</label>
      <input type="text" id="title" required><br>
      <label for="content">内容:</label><br>
      <textarea id="content" required></textarea><br>
      <button type="submit">新增文章</button>
    </form>
  </div>

  <script>
    const adminPassword = "20120701Lkr"; // 替换为你自己的密码
    let articles = JSON.parse(localStorage.getItem('articles')) || [];

    // 加载文章列表
    function loadArticles() {
      const list = document.getElementById('articleList');
      list.innerHTML = ''; // 清空现有的文章列表

      // 显示所有文章
      articles.forEach((article, index) => {
        const div = document.createElement('div');
        div.innerHTML = `<h3>${article.title}</h3><p>${article.content}</p>`;
        list.appendChild(div);
      });
    }

    // 登录验证
    document.getElementById("login").onsubmit = function(e) {
      e.preventDefault();
      const password = document.getElementById("password").value;
      if (password === adminPassword) {
        localStorage.setItem('isAdmin', true); // 记录管理员登录状态
        document.getElementById("loginForm").style.display = 'none';
        document.getElementById("adminPanel").style.display = 'block';
        loadArticles(); // 加载文章
      } else {
        alert("密码错误，请重新输入！");
      }
    };

    // 提交新增文章
    document.getElementById("createArticleForm").onsubmit = function(e) {
      e.preventDefault();
      const title = document.getElementById("title").value;
      const content = document.getElementById("content").value;

      // 创建新文章并存储到 localStorage
      const newArticle = { title, content };
      articles.push(newArticle);
      localStorage.setItem('articles', JSON.stringify(articles)); // 保存文章到 localStorage

      alert('文章创建成功！');
      loadArticles(); // 重新加载文章列表
      document.getElementById("createArticleForm").reset(); // 清空表单
    };

    // 页面加载时的逻辑
    window.onload = function() {
      if (localStorage.getItem('isAdmin')) {
        // 如果已经是管理员，显示管理面板
        document.getElementById("loginForm").style.display = 'none';
        document.getElementById("adminPanel").style.display = 'block';
        loadArticles(); // 加载文章
      } else {
        // 如果没有登录，显示密码输入框
        document.getElementById("loginForm").style.display = 'block';
      }
    };
  </script>
</body>
</html>
